/*! opstapp - v0.0.1 - Copyright (c) 2013 wooorm; Licensed MIT */
function RouteBoxer(){this.R=6371}(function(t,e){"use strict";function n(){if(!i.READY){i.event.determineEventTypes();for(var t in i.gestures)i.gestures.hasOwnProperty(t)&&i.detection.register(i.gestures[t]);i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0}}var i=function(t,e){return new i.Instance(t,e||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in t,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=document,i.plugins={},i.READY=!1,i.Instance=function(t,e){var o=this;return n(),this.element=t,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),e||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(t,i.EVENT_START,function(t){o.enabled&&i.detection.startDetect(o,t)}),this},i.Instance.prototype={on:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.addEventListener(n[i],e,!1);return this},off:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.removeEventListener(n[i],e,!1);return this},trigger:function(t,e){var n=i.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var o=this.element;return i.utils.hasParent(e.target,o)&&(o=e.target),o.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this}};var o=null,r=!1,s=!1;i.event={bindDom:function(t,e,n){for(var i=e.split(" "),o=0;i.length>o;o++)t.addEventListener(i[o],n,!1)},onTouch:function(t,e,n){var a=this;this.bindDom(t,i.EVENT_TYPES[e],function(l){var h=l.type.toLowerCase();if(!h.match(/mouse/)||!s){h.match(/touch/)||h.match(/pointerdown/)||h.match(/mouse/)&&1===l.which?r=!0:h.match(/mouse/)&&1!==l.which&&(r=!1),h.match(/touch|pointer/)&&(s=!0);var u=0;r&&(i.HAS_POINTEREVENTS&&e!=i.EVENT_END?u=i.PointerEvent.updatePointer(e,l):h.match(/touch/)?u=l.touches.length:s||(u=h.match(/up/)?0:1),u>0&&e==i.EVENT_END?e=i.EVENT_MOVE:u||(e=i.EVENT_END),u||null===o?o=l:l=o,n.call(i.detection,a.collectEventData(t,e,l)),i.HAS_POINTEREVENTS&&e==i.EVENT_END&&(u=i.PointerEvent.updatePointer(e,l))),u||(o=null,r=!1,s=!1,i.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=t[0],i.EVENT_TYPES[i.EVENT_MOVE]=t[1],i.EVENT_TYPES[i.EVENT_END]=t[2]},getTouchList:function(t){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():t.touches?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,e,n){var o=this.getTouchList(n,e),r=i.POINTER_TOUCH;return(n.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,n))&&(r=i.POINTER_MOUSE),{center:i.utils.getCenter(o),timeStamp:(new Date).getTime(),target:n.target,touches:o,eventType:e,pointerType:r,srcEvent:n,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return Object.keys(t.pointers).sort().forEach(function(n){e.push(t.pointers[n])}),e},updatePointer:function(t,e){return t==i.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var n={};return n[i.POINTER_MOUSE]=e.pointerType==e.MSPOINTER_TYPE_MOUSE||e.pointerType==i.POINTER_MOUSE,n[i.POINTER_TOUCH]=e.pointerType==e.MSPOINTER_TYPE_TOUCH||e.pointerType==i.POINTER_TOUCH,n[i.POINTER_PEN]=e.pointerType==e.MSPOINTER_TYPE_PEN||e.pointerType==i.POINTER_PEN,n[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.utils={extend:function(t,n,i){for(var o in n)t[o]!==e&&i||(t[o]=n[o]);return t},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){for(var e=[],n=[],i=0,o=t.length;o>i;i++)e.push(t[i].pageX),n.push(t[i].pageY);return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.pageY-t.pageY,i=e.pageX-t.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,e){var n=Math.abs(t.pageX-e.pageX),o=Math.abs(t.pageY-e.pageY);return n>=o?t.pageX-e.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:t.pageY-e.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(t,e){var n=e.pageX-t.pageX,i=e.pageY-t.pageY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==i.DIRECTION_UP||t==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){var n,i=["webkit","khtml","moz","ms","o",""];if(e&&t.style){for(var o=0;i.length>o;o++)for(var r in e)e.hasOwnProperty(r)&&(n=r,i[o]&&(n=i[o]+n.substring(0,1).toUpperCase()+n.substring(1)),t.style[n]=e[r]);"none"==e.userSelect&&(t.onselectstart=function(){return!1})}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:i.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var e=this.current.inst.options,n=0,o=this.gestures.length;o>n;n++){var r=this.gestures[n];if(!this.stopped&&e[r.name]!==!1&&r.handler.call(r,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==i.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;if(e&&(t.touches.length!=e.touches.length||t.touches===e.touches)){e.touches=[];for(var n=0,o=t.touches.length;o>n;n++)e.touches.push(i.utils.extend({},t.touches[n]))}var r=t.timeStamp-e.timeStamp,s=t.center.pageX-e.center.pageX,a=t.center.pageY-e.center.pageY,l=i.utils.getVelocity(r,s,a);return i.utils.extend(t,{deltaTime:r,deltaX:s,deltaY:a,velocityX:l.x,velocityY:l.y,distance:i.utils.getDistance(e.center,t.center),angle:i.utils.getAngle(e.center,t.center),direction:i.utils.getDirection(e.center,t.center),scale:i.utils.getScale(e.touches,t.touches),rotation:i.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var n=t.defaults||{};return n[t.name]===e&&(n[t.name]=!0),i.utils.extend(i.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},i.gestures=i.gestures||{},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,e){switch(t.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case i.EVENT_MOVE:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==i.EVENT_END){var n=i.detection.previous,o=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;n&&"tap"==n.name&&t.timeStamp-n.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),o=!0),(!o||e.options.tap_always)&&(i.detection.current.name="tap",e.trigger(i.detection.current.name,t))}}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==i.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(n.options.drag_max_touches>0&&t.touches.length>n.options.drag_max_touches))switch(t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(t.distance<n.options.drag_min_distance&&i.detection.current.name!=this.name)return;i.detection.current.name=this.name,(i.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var o=i.detection.current.lastEvent.direction;t.drag_locked_to_axis&&o!==t.direction&&(t.direction=i.utils.isVertical(o)?0>t.deltaY?i.DIRECTION_UP:i.DIRECTION_DOWN:0>t.deltaX?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),n.trigger(this.name+t.direction,t),(n.options.drag_block_vertical&&i.utils.isVertical(t.direction)||n.options.drag_block_horizontal&&!i.utils.isVertical(t.direction))&&t.preventDefault();break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(2>t.touches.length))switch(n.options.transform_always_block&&t.preventDefault(),t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var o=Math.abs(1-t.scale),r=Math.abs(t.rotation);if(n.options.transform_min_scale>o&&n.options.transform_min_rotation>r)return;i.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),r>n.options.transform_min_rotation&&n.trigger("rotate",t),o>n.options.transform_min_scale&&(n.trigger("pinch",t),n.trigger("pinch"+(1>t.scale?"in":"out"),t));break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,n){return n.options.prevent_mouseevents&&t.pointerType==i.POINTER_MOUSE?(t.stopDetect(),e):(n.options.prevent_default&&t.preventDefault(),t.eventType==i.EVENT_START&&n.trigger(this.name,t),e)}},i.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==i.EVENT_END&&e.trigger(this.name,t)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=i:(t.Hammer=i,"function"==typeof t.define&&t.define.amd&&t.define("hammer",[],function(){return i}))})(this),RouteBoxer.prototype.box=function(t,e){this.grid_=null,this.latGrid_=[],this.lngGrid_=[],this.boxesX_=[],this.boxesY_=[];var n=null;if(t instanceof Array)n=t;else if(t instanceof google.maps.Polyline)if(t.getPath){n=Array(t.getPath().getLength());for(var i=0;n.length>i;i++)n[i]=t.getPath().getAt(i)}else{n=Array(t.getVertexCount());for(var o=0;n.length>o;o++)n[o]=t.getVertex(o)}return this.buildGrid_(n,e),this.findIntersectingCells_(n),this.mergeIntersectingCells_(),this.boxesX_.length<=this.boxesY_.length?this.boxesX_:this.boxesY_},RouteBoxer.prototype.buildGrid_=function(t,e){for(var n=new google.maps.LatLngBounds,i=0;t.length>i;i++)n.extend(t[i]);var o=n.getCenter();for(this.latGrid_.push(o.lat()),this.latGrid_.push(o.rhumbDestinationPoint(0,e).lat()),i=2;this.latGrid_[i-2]<n.getNorthEast().lat();i++)this.latGrid_.push(o.rhumbDestinationPoint(0,e*i).lat());for(i=1;this.latGrid_[1]>n.getSouthWest().lat();i++)this.latGrid_.unshift(o.rhumbDestinationPoint(180,e*i).lat());for(this.lngGrid_.push(o.lng()),this.lngGrid_.push(o.rhumbDestinationPoint(90,e).lng()),i=2;this.lngGrid_[i-2]<n.getNorthEast().lng();i++)this.lngGrid_.push(o.rhumbDestinationPoint(90,e*i).lng());for(i=1;this.lngGrid_[1]>n.getSouthWest().lng();i++)this.lngGrid_.unshift(o.rhumbDestinationPoint(270,e*i).lng());for(this.grid_=Array(this.lngGrid_.length),i=0;this.grid_.length>i;i++)this.grid_[i]=Array(this.latGrid_.length)},RouteBoxer.prototype.findIntersectingCells_=function(t){var e=this.getCellCoords_(t[0]);this.markCell_(e);for(var n=1;t.length>n;n++){var i=this.getGridCoordsFromHint_(t[n],t[n-1],e);(i[0]!==e[0]||i[1]!==e[1])&&(1===Math.abs(e[0]-i[0])&&e[1]===i[1]||e[0]===i[0]&&1===Math.abs(e[1]-i[1])?this.markCell_(i):this.getGridIntersects_(t[n-1],t[n],e,i),e=i)}},RouteBoxer.prototype.getCellCoords_=function(t){for(var e=0;this.lngGrid_[e]<t.lng();e++);for(var n=0;this.latGrid_[n]<t.lat();n++);return[e-1,n-1]},RouteBoxer.prototype.getGridCoordsFromHint_=function(t,e,n){var i,o;if(t.lng()>e.lng())for(i=n[0];this.lngGrid_[i+1]<t.lng();i++);else for(i=n[0];this.lngGrid_[i]>t.lng();i--);if(t.lat()>e.lat())for(o=n[1];this.latGrid_[o+1]<t.lat();o++);else for(o=n[1];this.latGrid_[o]>t.lat();o--);return[i,o]},RouteBoxer.prototype.getGridIntersects_=function(t,e,n,i){var o,r,s,a=t.rhumbBearingTo(e),l=t,h=n;if(e.lat()>t.lat()){for(s=n[1]+1;i[1]>=s;s++)o=this.getGridIntersect_(t,a,this.latGrid_[s]),r=this.getGridCoordsFromHint_(o,l,h),this.fillInGridSquares_(h[0],r[0],s-1),l=o,h=r;this.fillInGridSquares_(h[0],i[0],s-1)}else{for(s=n[1];s>i[1];s--)o=this.getGridIntersect_(t,a,this.latGrid_[s]),r=this.getGridCoordsFromHint_(o,l,h),this.fillInGridSquares_(h[0],r[0],s),l=o,h=r;this.fillInGridSquares_(h[0],i[0],s)}},RouteBoxer.prototype.getGridIntersect_=function(t,e,n){var i=this.R*((n.toRad()-t.lat().toRad())/Math.cos(e.toRad()));return t.rhumbDestinationPoint(e,i)},RouteBoxer.prototype.fillInGridSquares_=function(t,e,n){var i;if(e>t)for(i=t;e>=i;i++)this.markCell_([i,n]);else for(i=t;i>=e;i--)this.markCell_([i,n])},RouteBoxer.prototype.markCell_=function(t){var e=t[0],n=t[1];this.grid_[e-1][n-1]=1,this.grid_[e][n-1]=1,this.grid_[e+1][n-1]=1,this.grid_[e-1][n]=1,this.grid_[e][n]=1,this.grid_[e+1][n]=1,this.grid_[e-1][n+1]=1,this.grid_[e][n+1]=1,this.grid_[e+1][n+1]=1},RouteBoxer.prototype.mergeIntersectingCells_=function(){var t,e,n,i=null;for(e=0;this.grid_[0].length>e;e++){for(t=0;this.grid_.length>t;t++)this.grid_[t][e]?(n=this.getCellBounds_([t,e]),i?i.extend(n.getNorthEast()):i=n):(this.mergeBoxesY_(i),i=null);this.mergeBoxesY_(i),i=null}for(t=0;this.grid_.length>t;t++){for(e=0;this.grid_[0].length>e;e++)this.grid_[t][e]?i?(n=this.getCellBounds_([t,e]),i.extend(n.getNorthEast())):i=this.getCellBounds_([t,e]):(this.mergeBoxesX_(i),i=null);this.mergeBoxesX_(i),i=null}},RouteBoxer.prototype.mergeBoxesX_=function(t){if(null!==t){for(var e=0;this.boxesX_.length>e;e++)if(this.boxesX_[e].getNorthEast().lng()===t.getSouthWest().lng()&&this.boxesX_[e].getSouthWest().lat()===t.getSouthWest().lat()&&this.boxesX_[e].getNorthEast().lat()===t.getNorthEast().lat())return this.boxesX_[e].extend(t.getNorthEast()),void 0;this.boxesX_.push(t)}},RouteBoxer.prototype.mergeBoxesY_=function(t){if(null!==t){for(var e=0;this.boxesY_.length>e;e++)if(this.boxesY_[e].getNorthEast().lat()===t.getSouthWest().lat()&&this.boxesY_[e].getSouthWest().lng()===t.getSouthWest().lng()&&this.boxesY_[e].getNorthEast().lng()===t.getNorthEast().lng())return this.boxesY_[e].extend(t.getNorthEast()),void 0;this.boxesY_.push(t)}},RouteBoxer.prototype.getCellBounds_=function(t){return new google.maps.LatLngBounds(new google.maps.LatLng(this.latGrid_[t[1]],this.lngGrid_[t[0]]),new google.maps.LatLng(this.latGrid_[t[1]+1],this.lngGrid_[t[0]+1]))},google.maps.LatLng.prototype.rhumbDestinationPoint=function(t,e){var n=6371,i=parseFloat(e)/n,o=this.lat().toRad(),r=this.lng().toRad();t=t.toRad();var s=o+i*Math.cos(t),a=s-o,l=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),h=Math.abs(a)>1e-10?a/l:Math.cos(o),u=i*Math.sin(t)/h;Math.abs(s)>Math.PI/2&&(s=s>0?Math.PI-s:-(Math.PI-s));var p=(r+u+Math.PI)%(2*Math.PI)-Math.PI;return isNaN(s)||isNaN(p)?null:new google.maps.LatLng(s.toDeg(),p.toDeg())},google.maps.LatLng.prototype.rhumbBearingTo=function(t){var e=(t.lng()-this.lng()).toRad(),n=Math.log(Math.tan(t.lat().toRad()/2+Math.PI/4)/Math.tan(this.lat().toRad()/2+Math.PI/4));return Math.abs(e)>Math.PI&&(e=e>0?-(2*Math.PI-e):2*Math.PI+e),Math.atan2(e,n).toBrng()},Number.prototype.toRad=function(){return this*Math.PI/180},Number.prototype.toDeg=function(){return 180*this/Math.PI},Number.prototype.toBrng=function(){return(this.toDeg()+360)%360},function(){var t,e;e=this,t=function(){},t.prototype.getPoint=function(t){return this._points[t]||!1},t.prototype.getPointByLocation=function(t){var e,n,i,o;if(t.id)return this.getPoint(t.id);for(o=this.getPointsAsArray(),e=-1,n=o.length;n>++e;)if(i=o[e],i.latLng.equals(t))return i;return!1},t.prototype.getPoints=function(){return this._points||!1},t.prototype.getPointsAsArray=function(){var t,e,n,i;n=[],i=this._points;for(t in i)e=i[t],n.push(e);return n},t.prototype.clearPoint=function(t){var e;return e=this._points[t],this._points[t]=null,e},t.prototype.clearPoints=function(){var t;return t=this._points,this._points={},t},t.prototype.setPoint=function(t){return t.info&&t.info.id?(t.isPoint=!0,t.latLng=new google.maps.LatLng(t.latitude,t.longitude),t.latLng.id=t.info.id,t.waypoint={location:t.latLng,stopover:!0},this._points[t.info.id]=t,this):!1},t.prototype.setPoints=function(t){var e,n;for(this._points||(this._points={}),e=-1,n=t.length;n>++e;)this.setPoint(t[e]);return this},t.prototype.getRoute=function(t){return this._routes[t]||!1},t.prototype.getRoutes=function(){return this._routes||!1},t.prototype.getRoutesAsArray=function(){var t,e,n,i;n=[],i=this._routes;for(t in i)e=i[t],n.push(e);return n},t.prototype.clearRoute=function(t){var e;return e=this._routes[t],this._routes[t]=null,e},t.prototype.clearRoutes=function(){var t;return t=this._routes,this._routes={},t},t.prototype.setRoute=function(t){var e,n,i,o,r,s;for(o=[],e=-1,r=t.route,n=r.length;n>++e;)i=this.getPoint(r[e].id),i&&o.push(i);for(s={image:t.image,name:t.name,description:t.description,origin:o[0],destination:o[o.length-1],waypoints:[]},o=s.points=o.slice(1,o.length-1),e=-1,n=o.length;n>++e;)s.waypoints.push(o[e].waypoint);return this._routes[t.id]=s,this},t.prototype.setRoutes=function(t){var e,n;for(this._routes||(this._routes={}),e=-1,n=t.length;n>++e;)this.setRoute(t[e]);return this},e.DataManager=t}.call(this),function(){var t,e,n,i,o,r,s,a;i=this,i.console||(i.console={}),i.console.log||(i.console.log=function(){}),a=Array.prototype.slice,t=i.$=function(e){var n,i,o,r,s;for(n=new t.NodeList,o=this.querySelector?this:document,i=o.querySelectorAll(e),s=i.length,r=-1;s>++r;)n[r]=i[r],n.length++;return n},e=i.$$=function(e,n){var i;return i=t(e),i.item(n)},t.NodeList=function(){},t.NodeList.prototype=Object.create(Array.prototype),t.NodeList.prototype.item=function(t){return this[t||0]||null},t.NodeList.prototype.length=0,t.NodeList.prototype.$=function(e){var n,i,o,r,s,a;for(n=new t.NodeList,s=this.length,o=-1;s>++o;)for(i=this[o].$(e),r=-1,a=i.length;a>++r;)n.push(i[r]);return n},t.NodeList.prototype.$$=function(t,e){var n;return n=this.$(t),n.item(e)},t.NodeList.prototype.clone=function(){var e,n,i;for(e=new t.NodeList,i=this.length,n=-1;i>++n;)e.push(this[n]);return e},t.NodeList.prototype.concat=function(){var e,n,i,o,r,s,l,h;for(e=this.clone(),i=a.call(arguments),o=this.querySelector?this:document,l=i.length,r=-1;l>++r;)if(n=i[r],n instanceof t.NodeList||n instanceof NodeList)for(h=n.length,s=-1;h>++s;)e.push(n[s]);else e.push(n);return e},t.NodeList.prototype.on=function(t,e){var n,i;for(i=this.length,n=-1;i>++n;)this[n].on(t,e);return this},Element.prototype.$=Element.prototype.querySelectorAll,Element.prototype.$$=Element.prototype.querySelector,Window.prototype.on=Window.prototype.addEventListener,Element.prototype.on=Element.prototype.addEventListener,n=document.createElement("div"),r="Khtml Ms O Moz Webkit".split(" "),s=r.length,i.supports=o=function(t){var e,i,o;if(e=s,t in n.style)return t;if(t=t.replace(/^[a-z]/,function(t){return t.toUpperCase()}),t in n.style)return t;for(;e--;){if(i=r[e]+t,i in n.style)return i;if(o=r[e].toLowerCase()+t,o in n.style)return o}return!1}}.call(this),function(){var t,e;e=this,t=function(t){var e,n,i=this;return this.listeners=[],t&&(this.options=t),n=this.onsuccess,e=this.onerror,this.onsuccess=function(){return n.apply(i,arguments)},this.onerror=function(){return e.apply(i,arguments)},this.isRequested=!1,this},t.prototype.request=function(){return this.isRequested!==!0?(this.isRequested=!0,navigator.geolocation?this.id=navigator.geolocation.watchPosition(this.onsuccess,this.onerror,this.options):this.onerror({code:-1,message:"GEOLOCATION UNAVAILABLE"}),this):void 0},t.prototype.options={enableHighAccuracy:!0,maximumAge:0},t.prototype.onsuccess=function(t){return this.position=t,this.onupdate(),this},t.prototype.on=function(t){return this.position&&t(this.position),this.listeners.push(t),this},t.prototype.once=function(t){var e,n=this;return this.position?(t(this.position),this):(e=function(){return t(n.position),n.off(e)},this.listeners.push(e),this)},t.prototype.off=function(t){var e,n;for(e=-1,n=this.listeners.length;n>++e;)if(this.listeners[e]===t)return this.listeners[e]=null,!0;return!1},t.prototype.listeners=[],t.prototype.onupdate=function(){var t,e,n;for(t=-1,e=this.listeners.length;e>++t;)n=this.listeners[t],n&&n.call&&n.apply&&this.listeners[t](this.position);return this},t.prototype.onerror=function(t){throw Error("There was an error in LocationManager: "+t.message+".")},e.LocationManager=t}.call(this),function(){var t,e,n;if(e=this,n=window.localStorage||window.sessionStorage||!1,!n)throw Error("Neither sessionStorage, nor localStorage is available, but one should be.");if(false in window)throw Error("JSON is not available, but should be.");t=function(){return this.defaults={},this},t.prototype.namespace="opstapp.setting.",t.prototype.setDefault=function(t,e){return this.defaults[this.namespace+t]=e,e},t.prototype.getDefault=function(t){return this.defaults[this.namespace+t]},t.prototype.removeDefault=function(t){var e,n;return e=this.namespace+t,n=this.defaults[e],this.defaults[e]=null,n},t.prototype.set=function(t,e){var i,o,r;o=this.namespace+t,r=e;try{e=JSON.stringify(e)}catch(s){throw i=s}return n.setItem(o,e),r},t.prototype.get=function(t){var e,i,o;if(i=this.namespace+t,o=n.getItem(i))try{o=JSON.parse(o)}catch(r){throw e=r}return o||this.getDefault(t)},t.prototype.remove=function(t){var e,i;return e=this.namespace+t,i=this.get(e),n.removeItem(e),i},t.prototype.clear=function(){var t;for(t in n)0===t.indexOf(this.namespace)&&n.removeItem(t);return this},e.SettingsManager=t}.call(this),function(){var t,e;e=this,t=function(t,e){var n=this;return this._mapStyles={},this._map=new google.maps.Map(t,e),this._markers=[],this._marker=null,app.locationManager.on(function(){return n.onLocationUpdate.apply(n,arguments)}),google.maps.event.addListener(this._map,"click",function(){return n.onClick.apply(n,arguments)}),this},t.prototype.REGEXP_LAT_LONG=/(?:\d{1,2}\.\d*),(?:\d{1,2}\.\d*)/,t.prototype.setRenderer=function(t){return this._renderer&&this._renderer.setMap(null),this._renderer=new google.maps.DirectionsRenderer(t),this._renderer.setMap(this._map),this},t.prototype.setPolylineOptions=function(t){return this._renderer.set("polylineOptions",t),this},t.prototype.setService=function(t){return this._service=new google.maps.DirectionsService(t),this},t.prototype.activateMapStyle=function(t){return this.hasMapStyle(t)?(this._map.mapTypes.set(t,this._mapStyles[t]),this._map.setMapTypeId(t),this):void 0},t.prototype.hasMapStyle=function(t){return!!this._mapStyles[t]},t.prototype.setMapStyle=function(t,e){return this._mapStyles[t]=new google.maps.StyledMapType(e,{name:t}),this},t.prototype.setMapStyles=function(t){var e,n;for(e in t)n=t[e],this.setMapStyle(e,n);return this},t.prototype.setIcon=function(t,e){var n,i;return this._icons||(this._icons={}),i=new google.maps.Size(e.size[0],e.size[1]),n={},i&&(n.size=n.scaledSize=i),e.anchor&&(n.anchor=new google.maps.Point(e.anchor[0],e.anchor[1])),e.url&&(n.url=e.url),this._icons[t]=n,this},t.prototype.getIcon=function(t){return this._icons?this._icons[t]||this._icons["default"]||!1:!1},t.prototype.setIcons=function(t){var e,n;this._icons||(this._icons={});for(e in t)n=t[e],this.setIcon(e,n);return this},t.prototype.setRouteBoxer=function(t){return this._boxer=t,this},t.prototype.onLocationUpdate=function(t){var e,n;return e=t.coords,n=new google.maps.LatLng(e.latitude,e.longitude),this._currentUser?this._currentUser.setPosition(n):this._currentUser=new google.maps.Marker({position:n,map:this._map,icon:this.getIcon("user"),title:"Huidige locatie.",animation:google.maps.Animation.DROP,flat:!0,optimized:!1,visible:!0}),this},t.prototype.clear=function(){var t,e,n;for(this._renderer.setMap(null),t=-1,e=this._markers.length;e>++t;)n=this._markers[t],n.setMap(null),n.infoWindow&&n.infoWindow.setMap(null);return this._markers=[],this._marker=null,this},t.prototype.requestRoute=function(t,e,n,i){var o,r=this;return t=""+t,e=""+e,o={origin:t,destination:e,travelMode:google.maps.TravelMode.WALKING},this._service.route(o,function(o,s){if(s!==google.maps.DirectionsStatus.OK)throw console.log("---|",r,arguments),Error("Uncatched error in `MapView::requestRoute`");r.findPointsOnRoute(o,t,e,n,i)}),this},t.prototype.findPointsOnRoute=function(t,e,n,i,o){var r,s,a,l,h,u,p,c,d,g,f;for(p=t.routes[0].overview_path,s=this._boxer.box(p,i),g=app.dataManager.getPointsAsArray(),d=[],a=-1,h=s.length;h>++a;)for(r=s[a],l=-1,u=g.length;u>++l;)c=g[l],r.contains(c.latLng)&&d.push(c.waypoint);if(d.length>8&&i>=.2)this.findPointsOnRoute(t,e,n,i-.1,o);else if(4>d.length&&10>i)this.findPointsOnRoute(t,e,n,i+.1,o);else{if(d.length>8)d=d.slice(0,8);else if(1>d.length)return e===n?(f=t.routes[0].summary,o({error:'De applicatie kon geen punten vinden in de buurt van\n"'+f+'".'})):(e=e.replace(this.REGEXP_LAT_LONG,"huidige locatie"),n=n.replace(this.REGEXP_LAT_LONG,"huidige locatie"),o({error:'De applicatie kon geen punten vinden tussen "'+e+'" \nen "'+n+'"'})),void 0;this.calculateRoute(d,e,n,o)}return this},t.prototype.metersToString=function(t){var e;return e=t/1e3,e=Math.ceil(e),"Afstand: "+e+"km"},t.prototype.secondsToString=function(t){var e,n;for(n=t/60,n=15*Math.ceil(n/15),e=0;n>59;)n-=60,e+=1;return 10>n&&(n="0"+n),"Tijd: "+e+"h "+n+"m"},t.prototype.onClick=function(){return this._marker&&this._marker.infoWindow?(this._marker.infoWindow.close(),this._marker=null):void 0},t.prototype.calculateRoute=function(t,e,n,i){var o,r=this;return o={origin:e,destination:n,waypoints:t,optimizeWaypoints:!0,travelMode:google.maps.TravelMode.WALKING},this._service.route(o,function(o,s){var a,l,h,u,p,c,d,g,f,m,_,v,y,E;if(s!==google.maps.DirectionsStatus.OK)throw console.log("---|",r,arguments),Error("Uncatched error in `MapView::calculateRoute`");for(E=o.routes[0],g=E.legs,h=0,u=0,y=[],e.lat&&e.lng&&(_=app.dataManager.getPointByLocation(e)),n.lat&&n.lng&&(l=app.dataManager.getPointByLocation(n)),_?y.push(_):(v=g[0],y.push({isPoint:!1,latLng:v.start_location,piece:v.start_address})),c=0,f=g.length;f>++c;)d=g[c],a=d.start_address,h+=d.distance.value,u+=d.duration.value,p=E.waypoint_order[c-1],void 0!==p&&(m=t[p].location,y.push(app.dataManager.getPointByLocation(m)));l?y.push(l):(v=g[f-1],y.push({isPoint:!1,latLng:v.end_location,piece:v.end_address})),u+=60*3*t.length,i({points:y,origin:e,destination:n,distance:r.metersToString(h),duration:r.secondsToString(u),response:o})}),this},t.prototype.updateBounds=function(){var t,e,n;for(t=new google.maps.LatLngBounds,e=-1,n=this._markers.length;n>++e;)t.extend(this._markers[e].position);return this._currentUser&&t.extend(this._currentUser.position),this._map.fitBounds(t),this},t.prototype.renderPoint=function(t,e,n,i){var o,r,s,a=this;return r=t.isPoint?this.getIcon(e):e===i-1?this.getIcon("b"):0===e?this.getIcon("a"):this.getIcon(),s=t.piece,o=t.artist?"<b>"+t.piece+"</b><br/>"+t.artist+"<br/>":"<b>"+t.piece+"</b>",window.setTimeout(function(){var e;return e=new google.maps.Marker({position:t.latLng,map:a._map,icon:r,title:s,animation:google.maps.Animation.DROP,flat:!0,optimized:!1}),e.infoWindow=new InfoBox({map:a._map,latlng:t.latLng,content:o,onclick:function(e){app.infoWindowIntent&&(e.data=t,app.infoWindowIntent.apply(this,arguments))}}),a._markers.push(e),google.maps.event.addListener(e,"click",function(){a.onClick(),a._marker=e,e.infoWindow.open(a._map)})},n),this},t.prototype.renderPoints=function(t,e){var n,i;if(n=-1,i=t.length,e)for(;i>++n;)this.renderPoint(t[n],0,100*n,i);else if(t[0].isPoint)for(;i>++n;)this.renderPoint(t[n],n+1,300*n,i);else for(;i>++n;)this.renderPoint(t[n],n,300*n,i);return this},t.prototype.renderRoute=function(t){return this.clear(),this.updateBounds(),this._renderer.setDirections(t.response),this._renderer.setMap(this._map),this.renderPoints(t.points),this.updateBounds(),this},e.MapView=t}.call(this),function(){var t,e,n;n=this,e=function(t){return google.maps.OverlayView.call(this),this.point=t.latlng,this.content=t.content,this.onclick=t.onclick,this.height=150,this.width=150,this.offsetVertical=-200,this.offsetHorizontal=-75,this},t=function(){},t.prototype=google.maps.OverlayView.prototype,e.prototype=new t,e.prototype.remove=function(){return this.close()},e.prototype.close=function(){return this.$node&&(this.$node.parentNode.removeChild(this.$node),this.$node=null),this.setMap(null),this},e.prototype.open=function(t){var e=this;return this.onboundsChange=google.maps.event.addListener(t,"bounds_changed",function(){return e.panMap()}),this.setMap(t),this},e.prototype.draw=function(){var t;return this.createElement(),this.$node&&(t=this.getProjection().fromLatLngToDivPixel(this.point))?(this.$node.style.width=""+this.width+"px",this.$node.style.left=""+(t.x+this.offsetHorizontal)+"px",this.$node.style.height=""+this.height+"px",this.$node.style.top=""+(t.y+this.offsetVertical)+"px",this.$node.style.display="table",this):void 0},e.prototype.createElement=function(){var t,e,n,i=this;return n=this.getPanes(),e=this.$node,e?e.parentNode!==n.floatPane?n.floatPane.appendChild(e.parentNode.removeChild(e)):void 0:(e=this.$node=document.createElement("div"),e.style.position="absolute",e.style.backgroundColor="white",e.style.textAlign="center",e.style.boxShadow="0 0 0 5px rgba(0,0,0,.5)",e.style.textTransform="uppercase",e.style.borderRadius="100%",e.style.zIndex="999",e.onclick=function(){return i.onclick&&i.onclick.apply(i,arguments),i},t=document.createElement("div"),t.innerHTML=this.content,t.style.display="table-cell",t.style.verticalAlign="middle",t.style.padding="0 0.75em",e.appendChild(t),e.style.display="none",n.floatPane.appendChild(e),this.panMap())
},e.prototype.panMap=function(){var t,e,n,i,o,r,s,a,l,h,u,p,c,d,g,f,m,_,v,y,E,T,w,b,N,P,M,R;return g=this.map,(t=g.getBounds())?(w=this.point,i=this.offsetHorizontal,o=this.offsetVertical,r=40,s=40,f=g.getDiv(),T=f.offsetWidth,_=f.offsetHeight,P=t.toSpan(),R=P.lng(),M=P.lat(),c=R/T,d=M/_,E=t.getSouthWest().lng(),m=t.getNorthEast().lng(),v=t.getNorthEast().lat(),y=t.getSouthWest().lat(),l=w.lng()+(i-r)*c,e=w.lng()+(i+this.width+r)*c,n=w.lat()-(o-s)*d,a=w.lat()-(o+this.height+s)*d,N=(E>l?E-l:0)+(e>m?m-e:0),b=(n>v?v-n:0)+(y>a?y-a:0),h=g.getCenter(),u=h.lng()-N,p=h.lat()-b,g.panTo(new google.maps.LatLng(p,u)),google.maps.event.removeListener(this.onboundsChange),this.onboundsChange=null):void 0},n.InfoBox=e}.call(this),function(){var t,e;e=this,t=e.app||(e.app={}),t.options||(t.options={}),t.options.renderer={suppressMarkers:!0,suppressInfoWindows:!0},t.options.polyline={strokeColor:"#5e99b0",strokeOpacity:1,strokeWeight:5},t.options.mapStyles={dark:[{elementType:"geometry",stylers:[{visibility:"on"},{color:"#242424"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{color:"#2f2f2f"},{visibility:"on"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#151515"},{visibility:"simplified"}]},{elementType:"labels.text.fill",stylers:[{color:"#7e7e80"}]},{elementType:"labels.text.stroke",stylers:[{color:"#000100"},{weight:2}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#1b1b1b"},{visibility:"simplified"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]}],light:[{featureType:"poi",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#eeeeee"}]},{elementType:"labels.text.stroke",stylers:[{color:"#000000"},{weight:2}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]},{elementType:"geometry",stylers:[{visibility:"on"},{color:"#8e8e8e"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"on"},{color:"#858585"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#222222"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"simplified"},{color:"#434343"}]},{featureType:"poi",stylers:[{visibility:"off"}]}]},t.options.icons={1:{anchor:[15,44],size:[30,50],url:"./asset/image/map/markers/1.png"},2:{anchor:[15,44],size:[30,50],url:"./asset/image/map/markers/2.png"},3:{anchor:[15,44],size:[30,50],url:"./asset/image/map/markers/3.png"},4:{anchor:[15,44],size:[30,50],url:"./asset/image/map/markers/4.png"},5:{anchor:[15,44],size:[30,50],url:"./asset/image/map/markers/5.png"},6:{anchor:[15,44],size:[30,50],url:"./asset/image/map/markers/6.png"},7:{anchor:[15,44],size:[30,50],url:"./asset/image/map/markers/7.png"},8:{anchor:[15,44],size:[30,50],url:"./asset/image/map/markers/8.png"},a:{anchor:[15,44],size:[30,50],url:"./asset/image/map/markers/a.png"},b:{anchor:[15,44],size:[30,50],url:"./asset/image/map/markers/b.png"},user:{anchor:[18,18],size:[35,36],url:"./asset/image/map/markers/user.png"},"default":{anchor:[15,44],size:[30,50],url:"./asset/image/map/markers/default.png"}}}.call(this),function(){var t,e;e=this,t=function(t,e){var n,i,o,r,s,a,l,h=this;if(this.$node=t,this.$container=t.$$(".carousel-list"),this.$panes=t.$(".carousel-list > li"),this.paneWidth=0,this.paneCount=this.$panes.length,this.paneCurrent=0,e){for(this.$controller=n=document.createElement("ul"),n.classList.add("carousel-controller"),s=[],a=-1,l=this.paneCount;l>++a;)s[a]='<li><a href="#" data-id="'+a+'">'+(a+1)+"</a></li>";n.innerHTML=s.join(""),this.$items=n.$("li"),o=n.$$("[data-id='"+this.paneCurrent+"']"),o.parentElement.classList.add("active"),t.appendChild(n)}return i=Hammer(t,{drag_lock_to_axis:!0}),i.on("release dragleft dragright swipeleft swiperight",function(){return h.handleHammer.apply(h,arguments)}),this.$controller.on("click",function(t){return"a"===t.target.tagName.toLowerCase()?h.handleController(t):void 0}),this.setPaneDimensions(),r=function(){return h.setPaneDimensions()},window.on("load",r),window.on("resize",r),window.on("orientationchange",r),this},t.prototype.setPaneDimensions=function(){var t,e;for(this.paneWidth=this.$node.getBoundingClientRect().width,t=-1,e=this.paneCount;e>++t;)this.$panes[t].style.width=this.paneWidth+"px";return this.$container.style.width=this.paneWidth*this.paneCount+"px",this},t.prototype.showPane=function(t){var e,n,i;if(this.paneCurrent=Math.max(0,Math.min(t,this.paneCount-1)),this.$items){for(n=-1,i=this.$items.length;i>++n;)this.$items[n].classList.remove("active");e=this.$controller.$$("[data-id='"+this.paneCurrent+"']"),e.parentElement.classList.add("active")}return this.setContainerOffset(100/this.paneCount*-this.paneCurrent,!0),this},t.prototype.setContainerOffset=function(t,e){var n;return e&&this.$container.classList.add("animate"),(n=supports("transform"))?this.$container.style[n]=e?"translate3d("+t+"%,0,0) scale3d(1,1,1)":"translate3d("+t+"%,0,0) scale3d(0.95,0.95,1)":this.$container.style.left=""+t*this.paneCount+"%",e||this.$container.classList.remove("animate"),this},t.prototype.next=function(){return this.showPane(this.paneCurrent+1,!0)},t.prototype.prev=function(){return this.showPane(this.paneCurrent-1,!0)},t.prototype.handleController=function(t){var e,n;return e=t.target,n=+e.dataset.id,t.preventDefault(),t.stopPropagation(),this.showPane(n,!0),this},t.prototype.handleHammer=function(t){var e,n,i,o;return t.gesture.preventDefault(),o=t.type,e=t.gesture.direction,"dragright"===o||"dragleft"===o?(i=100/this.paneCount*-this.paneCurrent,n=100/this.paneWidth*t.gesture.deltaX/this.paneCount,(0===this.paneCurrent&&e===Hammer.DIRECTION_RIGHT||this.paneCurrent===this.paneCount-1&&e===Hammer.DIRECTION_LEFT)&&(n*=.4),this.setContainerOffset(n+i)):"swipeleft"===o?(this.next(),t.gesture.stopDetect()):"swiperight"===o?(this.prev(),t.gesture.stopDetect()):"release"===o&&(this.paneWidth/2<Math.abs(t.gesture.deltaX)?"right"===e?this.prev():this.next():this.showPane(this.paneCurrent,!0)),this},e.Carousel=t}.call(this),function(){var t,e;t=this,e=function(t){var e,n,i;for(e=$("a");t&&t!==document;){for(n=-1,i=e.length;i>++n;)if(e[n]===t)return t;t=t.parentNode}},window.on("click",function(t){var n,i;n=e(t.target),n&&n.hash&&(t.preventDefault(),t.stopPropagation(),i=$(n.hash).item(),i&&i.classList.toggle("active"))})}.call(this),function(){var t,e;e=this,t=function(t){var e,n=this;return this.$node=t,this.height=window.innerHeight,this.nodeHeight=t.getBoundingClientRect().height,e=Hammer(t,{drag_lock_to_axis:!0}),e.on("touch swipedown swipeup dragup dragdown release",function(){return n.handleHammer.apply(n,arguments)}),this},t.prototype.setContainerOffset=function(t,e){var n;return this.$node.classList[e?"add":"remove"]("animate"),t>0?t=.3*t:-this.nodeHeight>t&&(t=-this.nodeHeight+.3*(this.nodeHeight+t)),n=100*(-t/this.height),this.$node.style.bottom=""+(100-n)+"%",this},t.prototype.show=function(){return this.setContainerOffset(-this.nodeHeight,!0),this.onshow&&this.onshow(this),this},t.prototype.hide=function(){return this.setContainerOffset(0,!0),this.onhide&&this.onhide(this),this},t.prototype.handleHammer=function(t){var e,n;if(t.target===this.$node)return t.gesture.preventDefault(),t.preventDefault(),n=t.type,e=t.gesture.direction,"dragup"===n||"dragdown"===n?this.setContainerOffset(-1*t.gesture.center.pageY):"swipedown"===n?this.show():"swipeup"===n?this.hide():"release"===n&&(this.nodeHeight/2<Math.abs(t.gesture.deltaY)?"up"===e?this.hide():this.show():this.show()),this},e.Planner=t}.call(this),function(){var t,e,n,i,o,r,s,a,l,h,u,p,c,d,g,f,m,_,v,y,E,T,w,b,N;E=this,v=E.app||(E.app={}),y=v.dataManager=new DataManager,y.setPoints(v.data),y.setRoutes(v.route),T=v.locationManager=new LocationManager,N=v.settingsManager=new SettingsManager,N.setDefault("map-color","dark"),a=$$(".route-info"),s=$$(".planner"),o=$$("#plan-route"),r=$$("#plan-route-to"),i=$$("#plan-route-from"),t=$$(".info-modal"),h=$$(".uitgestippeld-modal"),m=$$(".walkthrough-modal"),u=$$(".uitgestippeld-modal .carousel"),l=$$(".startup-image"),e=$$(".home-modal"),n=$('[name="map-color"]'),v.pointToString=function(t){var e;return e=t.description.length>=t.info.description.length?t.description:t.info.description,'<header class="bar-title">\n	<h3 class="title"><div class="overflow-wrapper">'+t.piece+'</div></h3>\n	<a class="button" href="#info-modal">sluiten</a>\n</header>\n<div class="content">\n	<div class="img" style="background-image:url(./asset/image/data/'+t.info.id+'_large.jpg)">\n		<img class="hidden" alt="" src="./asset/image/data/'+t.info.id+'_large.jpg">\n	</div>\n	<div class="info-wrapper">\n		<h1>'+t.info.title+"</h1>\n		<h2>"+t.artist+"</h2>\n		<p>"+e+'</p>\n		<a class="button-primary button-block button-large" href="'+t.link+'">naar het Rijksmuseum</a>\n	</div>\n</div>'},v.routeToInfoString=function(t){return'<div class="route-info-container">\n	<span class="route-info-distance">'+t.distance+'</span>\n	<span class="route-info-duration">'+t.duration+'</span>\n	<a class="route-info-clear button button-large">wissen</a>\n</div>'},v.infoWindowIntent=function(e){var n;return n=e.data,n.isPoint?(e.preventDefault(),e.stopPropagation(),t.innerHTML=v.pointToString(n),t.classList.add("active"),void 0):void 0},v.setMapStyle=function(t){var e,i,o;if(!v.mapView.hasMapStyle(t))return!1;for(N.set("map-color",t),v.mapView.activateMapStyle(t),i=-1,o=n.length;o>++i;)e=n[i],e.checked=0===e.id.indexOf("map-color-"+t)?!0:!1;return t},w=v.mapView=new MapView($$("#map-canvas"),{zoom:14,center:new google.maps.LatLng(52.359903,4.884131),disableDefaultUI:!0}),w.setMapStyles(v.options.mapStyles),w.setIcons(v.options.icons),w.setRenderer(v.options.renderer),w.setPolylineOptions(v.options.polyline),w.setService(null),w.setRouteBoxer(new RouteBoxer),v.setMapStyle(N.get("map-color")),window.on("click",function(t){var e,n;e=t.target,e.classList.contains("route-info-clear")&&(t.preventDefault(),t.stopPropagation(),a.classList.remove("active"),n=y.getPointsAsArray(),v.mapView.clear(),v.mapView.renderPoints(n,!0))}),_=/huidige locatie/i,o.on("click",function(t){var e,n,s,l;return t.preventDefault(),t.stopPropagation(),o.classList.add("loading"),l=i.value,n=r.value,s=.5,l||(l="Huidige locatie"),n||(n="Huidige locatie"),e=function(t){t.error?(alert("Sorry. Er trad een fout op in de applicatie: "+t.error),console.log("ERROR!",arguments)):(v.mapView.renderRoute(t),b.hide(),a.innerHTML=v.routeToInfoString(t),a.classList.add("active")),o.classList.remove("loading")},_.test(l)||_.test(n)?T.once(function(t){var i;return i=[t.coords.latitude,t.coords.longitude],_.test(l)&&(l=i),_.test(n)&&(n=i),v.mapView.requestRoute(l,n,s,e)}):v.mapView.requestRoute(l,n,s,e),void 0}),window.on("click",function(t){var e,n,i;if(n=t.target,!n.classList.contains("uitgestippeld-link")){if(e=n.parentElement,!e.classList.contains("uitgestippeld-link"))return;n=e}return(i=y.getRoute(n.dataset.id))?(t.preventDefault(),t.stopPropagation(),n.classList.add("loading"),v.mapView.calculateRoute(i.waypoints,i.origin.latLng,i.destination.latLng,function(t){return n.classList.remove("loading"),t.error?(alert("Sorry. Er trad een fout op in de applicatie: "+t.error),console.log("ERROR!",arguments)):(v.mapView.renderRoute(t),b.hide(),a.innerHTML=v.routeToInfoString(t),a.classList.add("active"),h.classList.remove("active"))}),void 0):void 0}),new Carousel(u,!0),b=new Planner(s),window.setTimeout(function(){return l.classList.add("hidden")},800),p=$$(".walkthrough-modal .p1"),c=$$(".walkthrough-modal .p2"),d=$$(".walkthrough-image"),g=$$(".walkthrough-modal .p3"),f=$$(".walkthrough-end"),window.setTimeout(function(){return m.classList.add("active")},1e3),window.setTimeout(function(){return p.classList.remove("hidden"),l.style.display="none"},1800),window.setTimeout(function(){return c.classList.remove("hidden")},2600),window.setTimeout(function(){return d.classList.remove("hidden")},3400),window.setTimeout(function(){return g.classList.remove("hidden")},4200),window.setTimeout(function(){return f.classList.remove("hidden")},5e3),f.on("click",function(){return b.show(),s.style.height="100%",e.classList.add("active"),v.mapView.clear(),v.mapView.renderPoints(y.getPointsAsArray(),!0)}),window.on("load",function(){return T.request()}),n.on("change",function(t){var e;e=t.target,v.setMapStyle(e.value)})}.call(this);